TODO
----

General
-------
[ ] Refactor the font implentation dump
[ ] Refactor accessor use - use setters if they are there. access directly or use getters to read: anyway that is most convenient.

Controller
----------
[ ] Issue: Stop editing - font popover needs to go as well
[ ] Issue: autocorrection and changing styles concurrently ...
[x] Issue: how much wood (hn) / would a chuck (futura) / could chuck wood (georgia) -> set position to end of line, fonts inconsistent, probably typing attributes wrong
[x] Issue: Font UI should update when text position changes
[ ] Design: Scroll selected font into view
[ ] Design: Disable styling ui elements when not editing
[ ] Issue: Initial font picker controller configuration
[ ] Design: Better icons for B/I/U
[x] Design: Figure out UI for fonts
[ ] Issue: Typewriter font synching broken - AmericanTypewriter / AmericanTypewriter-Bold
[ ] Issue: Toggling traits should add/remove, not reset every trait and font
[ ] Design: Text entry should dismiss popovers
[ ] Feature: Store a single page and persist
[ ] Design: Controller responsible for setting up styles of text view
[ ] Feature: Font management in text view
[ ] Issue: Popover + scroll view weirdness if rotated when visible

Text View
---------
[ ] Issue: Not convinced typing attributes 100% correct yet...
[ ] Issue: Copperplate italic?
[x] Issue: After typing attributes set, selection ui might be dirty
[ ] Issue: Keyboard input
[ ] Design: Cancel double tap and press if duration too long or distance too short?
[ ] Feature: Tokenization and movement - e.g. make sure selection isn't allowed to be empty
[ ] Feature: Selection handles
[ ] Feature: Scrolling behavior while editing
[ ] Feature: Cut copy paste
[ ] Feature: Context menus w/ selection
[ ] Design: follow UITextView conventions on ownership and follow conventions more closely
[ ] Optimization: Use a dirty marker for typesetting e.g.: [self setLineWidthDirty];
[ ] Optimization: Typeset at line granularity lazily
[ ] Optimization: Don't need skirt lines - can use typographic bounds
[ ] Optimization: Low memory - purge recycled sections

Deferred
--------
[ ] Issue: Weird underline drawing behavior with and without line break / descender glyphs (g, p, etc)
[ ] Issue: Insertion when position within marked text modified - UITextInput bug?
[ ] Issue: Whitespace at end of line not being handled properly
[ ] Issue: Selection color off
[ ] Issue: Typesetting lines with trailing white space causes some weird issues

Done
----
[x] Issue: Moving the selection should clear active attributes
[x] Issue: Detecting bold and italic should go through same logic
[x] Issue: Font logic detection failing for bold, italic, but no bold-italic (futura)
[x] Issue: Selecting font should resync toggle buttons and style attributes
[x] Design: Tune caret size
[x] Issue: With debug text, ui state doesn't update
[x] Issue: Zapfino (non-creatable) font issues
[x] Issue: Applying styles to marked text
[x] Issue: Problem with autocorrection on wrong ranges
[x] Design: Default font when text is empty?
[x] Design: Text position review and consistency
[x] Design: Insertion does not use property of newline characters
[x] Issue: Selected text range attribute updating not working quite right
[x] Issue: Proper updating of visual elements (e.g. selection) when text changes
[x] Feature: Toggling styles applies to selected text range
[x] Debugging: Clear text, sample text
[x] Design: Change default font
[x] Issue: Double tap on single location - strange selection behavior
[x] Issue: Make meaning of text position styling / fonts consistent (autocorrect, insertion text, etc)
[x] OCD: Make property access consistent
[x] OCD: Use internal ivar names
[x] Issue: UITextInput speed problems
[x] Issue: Rotation and selection elements!
[x] Issue: Empty doc, double tap select, long press select, visual behavior
[x] Issue: Fix rects returned
[x] Issue: marked text range selection at end
[x] Issue: dtnd loupe not working well on edge cases with abc test text
[x] Feature: Movement within marked text when marked text exists
[x] Feature: Marked text visuals...
[x] Issue: Loupe at bottom of device - background color
[x] Issue: Still having issues with drawing anti aliased lines in NKTHighlightRegion - try on same line as zh
[x] Issue: blank -> (zh)ni (db) (db) (english) you
[x] Issue: blank -> (zh)na (db) (db) (english) abcd
[x] Issue: unmarkText not being called correctly?
[x] Issue: ni hao ma (space) n (delete backwards) -> crash
[x] Issue: n (db) (db) (db) crash on empty page
[x] Issue: Select all text and delete
[x] Issue: Drawing order of selection etc.
[x] Design: Decouple some logic for selection, fonts, etc
[x] Issue: Enter/exit responder multiple times not interacting well with selection
[x] Refactor: Make caret creation and rect clearer
[x] Issue: Text view layout wrong when no text on start
[x] Issue: Tap beyong line should place caret at end of line.
[x] Issue: Caret should be sized with ascent + descent
[x] Issue: Make position computations clearer in text section
[x] Issue: Default Line Height + Large Margins -> last horizontal rule missing
[x] Issue: Text view doesn't rotate properly
[x] Feature: Lines/Styles
[x] Issue: Unlimited line drawing fails when using large margins
[x] Issue: what if glyphs from non visible line enter visible line? solve by design? buffer 1 on top and bottom and limit point size
[x] Issue: text clips if section frames are just right. can solve by adding some padding to frame?
[x] Crash: Creating text sections that won't display any lines..
[x] Issue: first line clipping glyphs?
